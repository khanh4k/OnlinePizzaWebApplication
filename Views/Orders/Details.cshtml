@model Order

@{
    ViewData["Title"] = "Chi ti·∫øt ƒë∆°n h√†ng";
}

<style>
    .order-info-title {
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 0.75rem;
    }

    .order-label {
        font-weight: 500;
        color: #555;
    }

    .order-value {
        font-weight: 600;
        color: #212529;
    }

    .order-details-table th,
    .order-details-table td {
        vertical-align: middle;
    }
</style>

<div class="container my-5">
    <div class="card shadow-lg rounded-4 border-0">
        <div class="card-header bg-primary text-white rounded-top-4 py-3">
            <h3 class="mb-0"><i class="fas fa-receipt me-2"></i>Chi ti·∫øt ƒë∆°n h√†ng</h3>
        </div>
        <div class="card-body px-4 py-5">

            <div class="row mb-4">
                <div class="col-md-6">
                    <div class="order-info-title">üßç‚Äç‚ôÇÔ∏è Th√¥ng tin kh√°ch h√†ng</div>
                    <p class="mb-1"><span class="order-label">H·ªç t√™n:</span> <span class="order-value">@Model.FirstName @Model.LastName</span></p>
                    <p class="mb-1"><span class="order-label">Email:</span> <span class="order-value">@Model.Email</span></p>
                    <p class="mb-1"><span class="order-label">SƒêT:</span> <span class="order-value">@Model.PhoneNumber</span></p>
                    <!-- Th√™m ph·∫ßn hi·ªÉn th·ªã tr·∫°ng th√°i -->
                    <p class="mb-1">
                        <span class="order-label">Tr·∫°ng th√°i:</span>
                        <span class="order-value">
                            @if (Model.Status == "Pending COD")
                            {
                                @:ƒë√£ thanh to√°n b·∫±ng ti·ªÅn m·∫∑t
                            }
                            else if (Model.Status == "Pending Payment")
                            {
                                @:ƒë√£ thanh to√°n b·∫±ng VnPay
                            }
                            else
                            {
                                @:ƒëang ch·ªù x·ª≠ l√Ω
                            }
                        </span>
                    </p>
                </div>
                <div class="col-md-6">
                    <div class="order-info-title">üìç ƒê·ªãa ch·ªâ giao h√†ng</div>
                    <p class="mb-1"><span class="order-value">@Model.AddressLine1</span></p>
                    @if (!string.IsNullOrEmpty(Model.AddressLine2))
                    {
                        <p class="mb-1"><span class="order-value">@Model.AddressLine2</span></p>
                    }
                    <p class="mb-1"><span class="order-value">@Model.City, @Model.State, @Model.ZipCode</span></p>
                    <p class="mb-1"><span class="order-value">@Model.Country</span></p>
                </div>
            </div>

            <div class="order-info-title">üì¶ Chi ti·∫øt ƒë∆°n h√†ng</div>
            <table class="table table-hover order-details-table">
                <thead class="table-primary text-center">
                    <tr>
                        <th>T√™n pizza</th>
                        <th>S·ªë l∆∞·ª£ng</th>
                        <th>ƒê∆°n gi√°</th>
                        <th>Th√†nh ti·ªÅn</th>
                    </tr>
                </thead>
                <tbody>
                    @if (ViewBag.OrderDetailsList == null || !((IEnumerable<OrderDetail>)ViewBag.OrderDetailsList).Any())
                    {
                        <tr>
                            <td colspan="4" class="text-center text-danger">Kh√¥ng c√≥ chi ti·∫øt ƒë∆°n h√†ng.</td>
                        </tr>
                    }
                    else
                    {
                        decimal total = 0M;
                        foreach (OrderDetail orderDetail in (IEnumerable<OrderDetail>)ViewBag.OrderDetailsList)
                        {
                            var subtotal = orderDetail.Amount * orderDetail.Price;
                            total += subtotal;
                        }
                        foreach (OrderDetail orderDetail in (IEnumerable<OrderDetail>)ViewBag.OrderDetailsList)
                        {
                            var subtotal = orderDetail.Amount * orderDetail.Price;
                            <tr class="text-center">
                                <td>@orderDetail.Pizza.Name</td>
                                <td>@orderDetail.Amount</td>
                                <td>@orderDetail.Price.ToString("c")</td>
                                <td>@subtotal.ToString("c")</td>
                            </tr>
                        }
                    }
                </tbody>
                <tfoot class="table-secondary fw-bold text-center">
                    <tr>
                        <td colspan="3" class="text-end">T·ªïng c·ªông:</td>
                        <td>@Model.OrderTotal.ToString("c")</td>
                    </tr>
                </tfoot>
            </table>

            <div class="text-end mt-4">
                <a asp-action="Index" class="btn btn-outline-secondary rounded-pill px-4">
                    <i class="bi bi-arrow-left-circle"></i> Quay l·∫°i danh s√°ch
                </a>
            </div>
        </div>
    </div>
</div>